---

copyright:
  years: 2019
lastupdated: "2019-05-29"


keywords: vpc, delete, resources

subcollection: vpc-on-classic
---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}
{:important: .important}
{:note: .note}
{:download: .download}
{:DomainName: data-hd-keyref="DomainName"}

# VPC 삭제
{: #deleting}

다른 리소스를 포함하거나 다른 리소스에 연결되어 있는 경우 {{site.data.keyword.cloud}} Virtual Private Cloud 리소스를 삭제할 수 없습니다. 이 문서에서는 VPC 리소스 간의 관계에 대해 설명하며 VPC 삭제 우수 사례에 대한 정보를 제공합니다.

다음 표에는 VPC 리소스의 유형과 해당 리소스 삭제 시 고려해야 할 관계가 요약되어 있습니다.

| 리소스 | 삭제되기 전에... | 삭제된 후... |
| ---------------- | ----------------------------------------- | --------------------------- |
| VPC | VPC의 모든 서브넷 및 공용 게이트웨이가 삭제되어야 함 | 모든 보안 그룹 및 주소 접두부가 자동으로 삭제됨 |
| 서브넷 | 서브넷의 모든 인스턴스 및 모든 네트워크 인터페이스가 삭제되어야 함, 서브넷의 모든 VPN 게이트웨이 및 로드 밸런서가 삭제되어야 함 | 서브넷을 제공하는 모든 공용 게이트웨이가 분리됨, 서브넷과 연관된 모든 네트워크 ACL이 분리됨 |
| 인스턴스 | ---- | 모든 네트워크 인터페이스가 자동으로 삭제됨, 부트 볼륨이 인스턴스와 함께 삭제됨, 두 번째 볼륨 삭제는 `delete_volume_on_instance_delete` 매개변수에 따라 다름, 네트워크 인터페이스 중 하나에 연결된 모든 유동 IP가 자동으로 분리됨 |
| 네트워크 인터페이스 | ---- | 네트워크 인터페이스에 연결된 모든 유동 IP가 해제됨 |
| 키 | ---- | 키를 삭제한 후 해당 키를 사용하여 더 이상 새 인스턴스를 프로비저닝하거나 기존 인스턴스로의 OS 다시 로드를 수행할 수 없습니다. 그러나 키로 프로비저닝한 모든 인스턴스에서 해당 키를 여전히 사용할 수 있으며 계속 해당 키를 사용하여 로그인할 수 있습니다. |
| 이미지 | ---- | 이미지를 사용하여 새 인스턴스를 프로비저닝할 수 없지만 이미지가 있는 기존 인스턴스에 영향을 미치지 않습니다. |
| 볼륨 | 볼륨이 모든 인스턴스에서 분리되어야 함 | ---- |
| 네트워크 ACL | 네트워크 ACL이 모든 서브넷에서 분리되어야 함, VPC에 대한 기본 네트워크 ACL은 삭제할 수 없음 | ---- |
| 보안 그룹 | 보안 그룹이 모든 네트워크 인터페이스에서 분리되어야 함, VPC에 대한 기본 보안 그룹은 삭제할 수 없음 | ---- |
| 유동 IP | 유동 IP가 모든 네트워크 인터페이스에서 분리되어야 함 | ---- |
| 공용 게이트웨이 | 공용 게이트웨이가 모든 서브넷에서 분리되어야 함 |  ---- |
| 로드 밸런서 | ---- | ---- |
| VPN 게이트웨이 | ---- | 게이트웨이 간에 IKE & IPsec 정책을 공유하는 기능으로 인해 VPN 게이트웨이가 삭제될 때 이러한 정책이 삭제되지 않습니다. IKE & IPsec 정책이 수동으로 제거되어야 합니다. |


## 임시 상태의 VPC 리소스를 삭제할 수 없음
{: #deleting-status}

VPC 리소스가 `pending`과 같은 임시 상태인 경우 삭제할 수 없습니다. 삭제하려면 모든 리소스가 `available` 또는 `failed`와 같은 "최종" 상태여야 합니다. 리소스를 삭제하려고 시도하기 전에 리소스가 `available` 또는 `failed`가 될 때까지 기다려야 합니다. 30분 내에 리소스가 `available` 또는 `failed` 상태를 표시하지 않는 경우 [지원에 문의](/docs/vpc-on-classic?topic=vpc-on-classic-getting-help-and-support)하십시오.

리소스 삭제 요청을 발행하면 리소스가 임시 상태인 `deleting`으로 전환됩니다. 상위 리소스 또는 연결된 리소스를 삭제하려고 시도하기 전에 리소스가 목록에서 사라질 때까지 기다리십시오. 일부 상황에서는 삭제 오퍼레이션이 실패할 수 있고 몇 분 내에 리소스가 `failed` 상태로 전환됩니다. 삭제 요청을 작성한 후 30분 내에 리소스가 사라지지 않거나 `failed` 상태를 표시하는 경우 지원에 문의하십시오. 리소스가 `failed` 상태이면 다시 삭제하려고 시도할 수 있습니다. `failed` 상태의 리소스를 삭제할 수 없는 경우 [지원에 문의](/docs/vpc-on-classic?topic=vpc-on-classic-getting-help-and-support)하십시오.

## VPC 삭제 시 따라야 할 순서
{: #deleting-order}

VPC에는 서브넷 및 공용 게이트웨이가 포함되어 있습니다. 공용 게이트웨이는 VPC에 있는 하나 이상의 서브넷에 연결될 수 있습니다. 로드 밸런서 및 VPN 게이트웨이는 VPC의 서브넷 내에 있습니다. 또한 서브넷에 가상 서버 인스턴스(VSI)가 포함될 수 있으며 하나의 VSI에는 VPC 내의 서로 다른 서브넷에 여러 네트워크 인터페이스가 있을 수 있습니다. 서브넷을 삭제하려면 먼저 서브넷의 VPN 게이트웨이, 로드 밸런서 및 네트워크 인터페이스를 삭제해야 합니다. VPC에는 보안 그룹도 포함되지만 이러한 보안 그룹은 VPC가 삭제될 때 자동으로 삭제됩니다. 주소 접두부는 VPC의 속성이며 VPC 삭제 시 자동으로 삭제됩니다.

VPC 삭제 시 다음 순서를 따르십시오.

1.  VPC의 서브넷에 프로비저닝된 모든 VPN 게이트웨이를 삭제하십시오.
2.  VPC의 서브넷에 프로비저닝된 모든 로드 밸런서를 분리하십시오.
3.  VPC의 서브넷에 네트워크 인터페이스가 있는 모든 인스턴스를 삭제하십시오. 인스턴스가 삭제되면 네트워크 인터페이스와 연관된 모든 유동 IP가 자동으로 네트워크 인터페이스에서 분리됩니다.
4.  VPC의 모든 서브넷을 삭제하십시오. 서브넷이 삭제될 때 해당 서브넷에 연결된 모든 공용 게이트웨이가 자동으로 서브넷에서 분리됩니다.
5.  VPC의 모든 공용 게이트웨이를 삭제하십시오.
6.  VPC에 서브넷 및 공용 게이트웨이가 없으면 VPC를 삭제할 수 있습니다. VPC가 삭제되면 VPC의 모든 주소 접두부가 자동으로 삭제됩니다.

## VPC 리소스 관계
{: #deleting-relationships}

일부 VPC 리소스는 다른 VPC 리소스 내에 포함되지만("하위"로) 다른 VPC 리소스는 특정 VPC 외부에 계정 레벨로 포함됩니다. 상위 리소스를 삭제하기 전에 모든 하위 VPC 리소스를 삭제해야 합니다. 계정 레벨 VPC 리소스의 경우 계정 리소스를 삭제하기 전에 기존 리소스에 대한 모든 링크를 삭제해야 합니다.

일부 경우에 VPC 리소스를 삭제하면 기존 리소스에 대한 링크가 자동으로 제거됩니다. 아래 표에 예상 동작이 설명되어 있습니다.

### VPC
{: #deleting-details}

VPC에는 서브넷 및 공용 게이트웨이가 포함되어 있습니다. 로드 밸런서, VPN 게이트웨이 및 인스턴스가 서브넷에 프로비저닝됩니다. VPC를 삭제하기 전에 VPC에 있는 모든 서브넷과 모든 공용 게이트웨이를 삭제해야 합니다. 즉, VPC에 있는 모든 공용 게이트웨이, 로드 밸런서, VPN 게이트웨이 및 인스턴스를 먼저 삭제해야 합니다.

VPC에 주소 접두부 및 보안 그룹도 포함되지만 이러한 리소스는 VPC 삭제 시 자동으로 삭제됩니다.

VPC에는 기본 보안 그룹과 기본 네트워크 ACL이 있어야 합니다. 기본 보안 그룹 및 네트워크 ACL을 지정하지 않고 VPC를 작성하면 VPC에 대한 기본 보안 그룹 및 네트워크 ACL이 자동으로 작성됩니다. 기본 보안 그룹과 기본 네트워크 ACL은 삭제할 수 없습니다. VPC가 삭제될 때 기본 네트워크 ACL이 자동으로 삭제됩니다. VPC가 삭제될 때 VPC의 모든 보안 그룹이 자동으로 삭제됩니다.

| VPC에서 | 다음을 포함할 수 있음 | 다음에 연결할 수 있음 | 상태가 있는지 여부 | VPC 삭제 시 자동 삭제 | 삭제 시 자동 분리 |
| ---------------- | ----------------------------------------- | --------------------------- | ------ | ---------------------------------------------- | ----------------------------------- |
| 서브넷 | 인스턴스, 로드 밸런서, VPN 게이트웨이 | 공용 게이트웨이, 네트워크 ACL |예|아니오 |예|
| 공용 게이트웨이| --- | 서브넷, 유동 IP |예 |아니오 | 서브넷의 경우 아니오, 유동 IP의 경우 예 |
| 보안 그룹 | ---  | 인스턴스(NIC), 기본값인 VPC |아니오|예 |아니오 |

### 서브넷
{: #deleting-subnet}

서브넷을 삭제하려면 먼저 서브넷의 모든 리소스를 삭제해야 합니다. 서브넷에는 인스턴스의 네트워크 인터페이스, 로드 밸런서 및 VPN 게이트웨이가 포함됩니다. 서브넷을 삭제하기 전에 해당 서브넷에 프로비저닝된 모든 로드 밸런서 및 VPC 게이트웨이와 함께 해당 서브넷과 연관된 네트워크 인터페이스를 삭제해야 합니다.

인스턴스에 다중 네트워크 인터페이스가 있을 수 있으며 해당 네트워크 인터페이스가 다중 VPC 서브넷에 속할 수 있습니다. 서브넷을 삭제하려면 먼저 서브넷의 네트워크 인터페이스를 삭제해야 합니다. 인스턴스의 기본 네트워크 인터페이스를 삭제하거나 다른 서브넷으로 이동할 수 없으므로 서브넷을 삭제하기 전에 해당 서브넷에 기본 네트워크 인터페이스가 있는 모든 인스턴스를 삭제해야 합니다.


| 서브넷에서 | 다음을 포함할 수 있음 | 다음에 연결할 수 있음 | 상태가 있는지 여부 | 서브넷 삭제 시 자동 삭제 | 삭제 시 자동 분리 |
| ---------------- | ----------------------------------------- | --------------------------- | ------ | ---------------------------------------------- | ----------------------------------- |
| 인스턴스(네트워크 인터페이스) | 다중 네트워크 인터페이스 | 볼륨 연결, 보안 그룹 |예|아니오  |예|
| VPN | --- | ---|예 |아니오  | --- |
| Load Balancer | ---  | --- |예 |아니오 | ---  |

### 인스턴스
{: #deleting-instance}

인스턴스 삭제에는 전제조건이 필요하지 않습니다. 인스턴스가 삭제되면 해당 네트워크 인터페이스가 모두 자동으로 삭제됩니다. 인스턴스의 부트 볼륨과 모든 볼륨 연결이 삭제됩니다. 해당 네트워크 인터페이스에 연결된 모든 유동 IP가 자동으로 해제됩니다. `delete_volume_on_instance_delete` 플래그가 true로 설정된 상태로 볼륨이 작성된 경우 인스턴스에 연결된 블록 스토리지 볼륨이 자동으로 삭제됩니다. 그렇지 않으면 인스턴스가 볼륨에서 분리되지만 볼륨은 남아 있습니다. 보안 그룹이 인스턴스의 네트워크 인터페이스 중 하나에 연결된 경우 네트워크 인터페이스가 삭제될 때 보안 그룹도 자동으로 분리됩니다.

| 인스턴스에서 | 다음을 포함할 수 있음 | 다음에 연결할 수 있음 | 상태가 있는지 여부 | 인스턴스 삭제 시 자동 삭제 | 삭제 시 자동 분리 |
| ---------------- | ----------------------------------------- | --------------------------- | ------ | ---------------------------------------------- | ----------------------------------- |
| 네트워크 인터페이스 | --- | 서브넷, 유동 IP, 보안 그룹 |아니오 |예 |예 |

### 로드 밸런서
{: #deleting-lb}

로드 밸런서 삭제에는 전제조건이 필요하지 않습니다. 로드 밸런서가 삭제되면 로드 밸런서의 일부인 모든 리스너, 풀 및 풀 멤버가 자동으로 삭제됩니다.

로드 밸런서를 삭제하는 데 최대 30분이 걸릴 수 있습니다. 삭제 요청이 로드 밸런서의 프로비저닝 상태를 `deleting`으로 즉시 변경합니다. 그러나 로드 밸런서가 목록 조회에 나타나지 않을 때까지 실제로 삭제되지 않습니다.
{: important}

### VPN
{: #deleting-vpn}

VPN 게이트웨이 삭제에는 전제조건이 필요하지 않습니다. VPN 게이트웨이가 삭제되면 이와 연관된 연결도 자동으로 삭제됩니다. IKE 정책 및 IPSec 정책은 VPN 게이트웨이 삭제 시 삭제되지 않습니다.

VPN 게이트웨이를 삭제하는 데 최대 30분이 걸릴 수 있습니다. 삭제 요청이 VPN 게이트웨이의 프로비저닝 상태를 `deleting`으로 즉시 변경합니다. 그러나 VPN 게이트웨이가 목록 조회에 나타나지않을 때까지 실제로 삭제되지 않습니다.
{: important}

### 유동 IP
{: #deleting-floating-ip}

유동 IP는 VPC 외부의 계정 레벨에 있습니다. 유동 IP가 공용 게이트웨이 또는 인스턴스에 바인드된 경우 유동 IP를 삭제하기 전에 먼저 링크를 삭제(해제)해야 합니다.

유동 IP가 바인드된 리소스를 삭제하는 경우, 예를 들어 인스턴스의 네트워크 인터페이스를 삭제하면 유동 IP가 자동으로 해제됩니다.

###  볼륨
{: #deleting-volume}

VPC에는 두 가지 유형의 볼륨, 블록 스토리지 부트 볼륨 및 블록 스토리지 데이터 볼륨이 있을 수 있습니다. 이러한 볼륨은 서로 다르게 삭제됩니다.

**부트 볼륨 삭제**

부트 볼륨은 인스턴스 내에 존재하며 해당 인스턴스와 별개의 엔티티로 간주되지 않습니다. 인스턴스를 작성할 때 부트 볼륨도 작성되고 인스턴스에 연결됩니다. 인스턴스를 삭제하면 부트 볼륨이 자동으로 삭제됩니다. 인스턴스를 삭제하지 않고 부트 볼륨을 삭제할 수 없습니다. 

**데이터 볼륨 삭제**

블록 스토리지 데이터 볼륨은 연관된 가상 서버 인스턴스와 별도로 프로비저닝 및 관리될 수 있습니다. 데이터 볼륨을 하나의 가상 서버 인스턴스에 보조 스토리지로 연결할 수 있습니다. 인스턴스에 연결된 데이터 볼륨(즉, 볼륨이 "활성" 상태인 경우)은 삭제할 수 없습니다. 먼저 인스턴스에서 볼륨을 분리한 후 볼륨을 삭제할 수 있습니다.

데이터 볼륨에는 API의 경우 `delete_volume_on_instance_delete`, CLI 및 UI의 경우 `Auto Delete`라는 속성(플래그)이 있습니다. 이 플래그가 `true`(UI에서는 `Enabled`)로 설정되면 연결된 볼륨이 있는 인스턴스가 삭제될 때 볼륨이 분리되고 자동으로 삭제됩니다. 볼륨의 플래그가 `false`(UI에서는 `Disabled`)로 설정되면 연결된 인스턴스가 삭제될 때 인스턴스가 볼륨에서 분리되지만 볼륨이 삭제되지는 않습니다. 해당 볼륨을 다른 인스턴스에 연결할 수 있습니다.

블록 스토리지 볼륨은 한 번에 하나의 가상 서버에만 연결될 수 있습니다.
{: tip}

###  보안 그룹
{: #deleting-secgroup}

네트워크 인터페이스에서 사용되고 있거나 VPC의 기본 보안 그룹인 경우 보안 그룹을 삭제할 수 없습니다. 보안 그룹을 삭제하기 전에 해당 보안 그룹에서 모든 네트워크 인터페이스를 제거하고 보안 그룹이 VPC의 기본 보안 그룹으로 사용되고 있지 않은지 확인하십시오.

VPC를 삭제하면 해당 VPC에 있는 모든 보안 그룹이 자동으로 삭제됩니다.

### 네트워크 ACL
{: #deleting-netacl}

서브넷에서 사용되고 있거나 VPC의 기본 네트워크 ACL인 경우 네트워크 ACL을 삭제할 수 없습니다. 네트워크 ACL을 삭제하기 전에 모든 서브넷에서 네트워크 ACL을 분리하고 네트워크 ACL이 VPC의 기본 네트워크 ACL로 사용되고 있지 않은지 확인하십시오.

VPC 작성 시 기본 네트워크 ACL이 필요합니다. VPC가 작성될 때 기존 네트워크 ACL이 기본값으로 지정되지 않으면 새 네트워크 ACL이 작성되고 기본값으로 설정됩니다. 이 기본 네트워크 ACL은 다른 위치에서 사용 중이지 않으면 VPC 삭제 시 자동으로 삭제됩니다.

보안 그룹과 달리, 네트워크 ACL은 VPC에 걸쳐 지정될 수 있습니다. 따라서 VPC를 삭제해도 네트워크 ACL은 삭제되지 않습니다.
{: note}

## 다음 단계
{: #deleting-nextsteps}

다음 주제에서는 IBM Cloud 콘솔, 명령행 인터페이스 또는 API를 사용하여 VPC 리소스를 삭제하는 방법에 대한 추가 예제를 제공합니다.

-   [UI를 사용하여 VPC 리소스 삭제](/docs/vpc-on-classic?topic=vpc-on-classic-deleting-using-console)
-   [CLI를 사용하여 VPC 리소스 삭제](/docs/vpc-on-classic?topic=vpc-on-classic-deleting-using-cli)
-   [API를 사용하여 VPC 리소스 삭제](/docs/vpc-on-classic?topic=vpc-on-classic-deleting-using-api)
